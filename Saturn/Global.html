<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global</title>
    <!-- Use Bootstrap 5 for modern look -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="./static/content/site.css" />
    <link rel="stylesheet" type="text/css" href="./static/content/Aspire.Dashboard.styles.css" />
    <link rel="stylesheet" type="text/css" href="./static/content/chatgptassist.css" />
        <style>
        body {
            background: #1e293b;
            color: #f1f5f9;
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        #globe-container {
            width: 75vw;
            height: 75vh;
        }
        .alerts-section {
            flex: 1;
            position: relative;
            width: 100%;
        }
        .alerts-popup {
            position: sticky;
            top: 2rem;
            z-index: 10;
            background: rgba(30,41,59,0.98);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(59,130,246,0.18);
            border: 1px solid rgba(255,255,255,0.10);
            padding: 1.5rem 1.2rem;
            min-height: 120px;
        }
        .alert-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .alert-item {
            margin-bottom: 1.2rem;
        }
        .alert-content {
            background: rgba(220,38,38,0.12);
            border-left: 5px solid #ef4444;
            border-radius: 12px;
            padding: 1.2rem 1.2rem 1.2rem 1.5rem;
            box-shadow: 0 2px 12px rgba(59,130,246,0.08);
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }
        .alert-icon {
            font-size: 1.5rem;
            color: #ef4444;
            margin-top: 2px;
        }
        .alert-title {
            font-weight: 700;
            color: #f1f5f9;
            font-size: 1.08rem;
        }
        .alert-message {
            color: #e0e7ef;
            margin: 0.2rem 0 0.4rem 0;
        }
        .alert-timestamp {
            font-size: 0.93rem;
            color: #64748b;
        }
        .no-alerts {
            background: rgba(59,130,246,0.10);
            border-radius: 12px;
            padding: 1.2rem 1.2rem;
            color: #a5b4fc;
            text-align: center;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a href="index.html" class="navbar-brand">Ophelia</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="search-bar ms-3 d-block">
                <input type="text" id="searchInput" placeholder="Checked out to me..." onkeypress="handleKeyPress(event)">
            </div>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item"><a class="nav-link" href="jlabclouds/index.html" target="_blank">Exam Guides</a></li>
                    <li class="nav-item">
                       <!-- Apps Dropdown Button -->
                        <div class="dropdown">
                            <button class="btn btn-default dropdown-toggle" onclick="toggleDropdown()" id="appsDropdownBtn">
                                Apps
                            </button>
                            <div class="dropdown-menu" id="appsDropdownMenu">
                                <a class="dropdown-item" href="Saturn/Global.html">Saturn</a>
                                <a class="dropdown-item" href="Neptune/Neptune.html">Neptune</a>
                                <a class="dropdown-item" href="Saturn/Fleet.html">Fleet</a>
                            </div>
                        <a class="btn btn-default" href="https://fosstodon.org/tags/FediHire" target="_blank" title="Fedihire">
                            <img src="https://cdn.fosstodon.org/site_uploads/files/000/000/005/1024/c10e49304bc968d0.png" alt="Fosstodon logo" style="width: 24px; height: 24px;" />
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="btn btn-default" href="https://github.com/jlabclouds" target="_blank" title=".NET Aspire repo">
                            <!-- Github SVG -->
                            <svg style="width: 24px; fill: var(--neutral-foreground-rest);" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path transform="scale(0.20833) translate(9.6 9.6)" fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"></path></svg>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="btn btn-default" title="Chat with GitHub Copilot">
                            <!-- Copilot SVG -->
                            <svg style="width: 24px; fill: var(--neutral-foreground-rest);" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path transform="scale(1.5)" d="M6.25 9.016C6.66421 9.016 7 9.35089 7 9.76399V11.26C7 11.6731 6.66421 12.008 6.25 12.008C5.83579 12.008 5.5 11.6731 5.5 11.26V9.76399C5.5 9.35089 5.83579 9.016 6.25 9.016Z"></path>
                            <path transform="scale(1.5)" d="M10.5 9.76399C10.5 9.35089 10.1642 9.016 9.75 9.016C9.33579 9.016 9 9.35089 9 9.76399V11.26C9 11.6731 9.33579 12.008 9.75 12.008C10.1642 12.008 10.5 11.6731 10.5 11.26V9.76399Z"></path>
                            <path transform="scale(1.5)" d="M7.86079 1.80482C7.91028 1.8577 7.95663 1.91232 8 1.96856C8.04337 1.91232 8.08972 1.8577 8.13921 1.80482C8.82116 1.07611 9.87702 0.90832 11.0828 1.04194C12.3131 1.17827 13.2283 1.56829 13.8072 2.29916C14.3725 3.01276 14.5 3.90895 14.5 4.77735C14.5 5.34785 14.447 5.92141 14.2459 6.428L14.4135 7.26391L14.4798 7.29699C15.4115 7.76158 16 8.71126 16 9.7501V11.0107C16 11.2495 15.9143 11.4478 15.844 11.5763C15.7691 11.7131 15.6751 11.8368 15.5851 11.9416C15.4049 12.1512 15.181 12.3534 14.9801 12.5202C14.7751 12.6907 14.5728 12.8419 14.4235 12.9494C14.1842 13.1217 13.9389 13.2807 13.6826 13.4277C13.3756 13.6038 12.9344 13.8361 12.3867 14.0679C11.2956 14.5296 9.75604 15 8 15C6.24396 15 4.70442 14.5296 3.61334 14.0679C3.06559 13.8361 2.62435 13.6038 2.31739 13.4277C2.0611 13.2807 1.81581 13.1217 1.57651 12.9494C1.42716 12.8419 1.2249 12.6907 1.01986 12.5202C0.819 12.3534 0.595113 12.1512 0.414932 11.9416C0.3249 11.8368 0.230849 11.7131 0.156031 11.5763C0.0857453 11.4478 0 11.2495 1.90735e-06 11.0107L0 9.7501C0 8.71126 0.588507 7.76158 1.52017 7.29699L1.5865 7.26391L1.75413 6.42799C1.55295 5.9214 1.5 5.34785 1.5 4.77735C1.5 3.90895 1.62745 3.01276 2.19275 2.29916C2.77172 1.56829 3.68694 1.17827 4.91718 1.04194C6.12298 0.90832 7.17884 1.07611 7.86079 1.80482ZM3.0231 7.7282L3 7.8434V12.0931C3.02086 12.1053 3.04268 12.1179 3.06543 12.131C3.32878 12.2821 3.71567 12.4861 4.19916 12.6907C5.17058 13.1017 6.50604 13.504 8 13.504C9.49396 13.504 10.8294 13.1017 11.8008 12.6907C12.2843 12.4861 12.6712 12.2821 12.9346 12.131C12.9573 12.1179 12.9791 12.1053 13 12.0931V7.8434L12.9769 7.7282C12.4867 7.93728 11.9022 8.01867 11.25 8.01867C10.1037 8.01867 9.19051 7.69201 8.54033 7.03004C8.3213 6.80703 8.14352 6.55741 8 6.28924C7.85648 6.55741 7.6787 6.80703 7.45967 7.03004C6.80949 7.69201 5.89633 8.01867 4.75 8.01867C4.09776 8.01867 3.51325 7.93728 3.0231 7.7282ZM6.76421 2.82557C6.57116 2.61928 6.12702 2.41307 5.08282 2.52878C4.06306 2.64179 3.60328 2.93176 3.36975 3.22656C3.12255 3.53861 3 4.01374 3 4.77735C3 5.56754 3.12905 5.94499 3.3082 6.1441C3.47045 6.32443 3.82768 6.52267 4.75 6.52267C5.60367 6.52267 6.08903 6.28769 6.38811 5.98319C6.70349 5.66209 6.91507 5.1591 7.00579 4.43524C7.12274 3.50212 6.96805 3.04338 6.76421 2.82557ZM9.23579 2.82557C9.03195 3.04338 8.87726 3.50212 8.99421 4.43524C9.08493 5.1591 9.29651 5.66209 9.61189 5.98319C9.91097 6.28769 10.3963 6.52267 11.25 6.52267C12.1723 6.52267 12.5295 6.32443 12.6918 6.1441C12.871 5.94499 13 5.56754 13 4.77735C13 4.01374 12.8775 3.53861 12.6303 3.22656C12.3967 2.93176 11.9369 2.64179 10.9172 2.52878C9.87298 2.41307 9.42884 2.61928 9.23579 2.82557Z"></path></svg>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="btn btn-default" title="Settings">
                            <!-- Settings SVG -->
                            <svg style="width: 24px; fill: var(--neutral-foreground-rest);" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M12.01 2.25c.74 0 1.47.1 2.18.25.32.07.55.33.59.65l.17 1.53a1.38 1.38 0 0 0 1.92 1.11l1.4-.61c.3-.13.64-.06.85.17a9.8 9.8 0 0 1 2.2 3.8c.1.3 0 .63-.26.82l-1.25.92a1.38 1.38 0 0 0 0 2.22l1.25.92c.26.19.36.52.27.82a9.8 9.8 0 0 1-2.2 3.8.75.75 0 0 1-.85.17l-1.4-.62a1.38 1.38 0 0 0-1.93 1.12l-.17 1.52a.75.75 0 0 1-.58.65 9.52 9.52 0 0 1-4.4 0 .75.75 0 0 1-.57-.65l-.17-1.52a1.38 1.38 0 0 0-1.93-1.11l-1.4.62a.75.75 0 0 1-.85-.18 9.8 9.8 0 0 1-2.2-3.8c-.1-.3 0-.63.26-.82l1.25-.92a1.38 1.38 0 0 0 0-2.22l-1.24-.92a.75.75 0 0 1-.28-.82 9.8 9.8 0 0 1 2.2-3.8c.23-.23.57-.3.86-.17l1.4.62c.4.17.86.15 1.25-.08.38-.22.63-.6.68-1.04l.17-1.53a.75.75 0 0 1 .58-.65c.72-.16 1.45-.24 2.2-.25Zm0 1.5c-.45 0-.9.04-1.35.12l-.11.97a2.89 2.89 0 0 1-4.03 2.33l-.9-.4A8.3 8.3 0 0 0 4.29 9.1l.8.59a2.88 2.88 0 0 1 0 4.64l-.8.59a8.3 8.3 0 0 0 1.35 2.32l.9-.4a2.88 2.88 0 0 1 4.02 2.32l.1.99c.9.15 1.8.15 2.7 0l.1-.99a2.88 2.88 0 0 1 4.02-2.32l.9.4a8.3 8.3 0 0 0 1.35-2.32l-.8-.59a2.88 2.88 0 0 1 0-4.64l.8-.59a8.3 8.3 0 0 0-1.35-2.32l-.9.4a2.88 2.88 0 0 1-4.02-2.32l-.1-.98c-.45-.08-.9-.11-1.34-.12ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z"></path></svg>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="btn btn-default" href="https://portal.azure.com" target="_blank" title="Account" style="border-radius: 50%;">
                            <img src="https://i.imgur.com/yXOvdOSs.jpg" alt="Account Logo" style="width: 32px; height: 32px;">
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <h1>Step 1 - Simple Globe</h1>

    <div style="display: flex; gap: 2rem; align-items: flex-start; margin-bottom: 2.5rem;">
        <!-- Map Section -->
        <div class="map-placeholder" style="flex: 2;">
            <!-- Search bar moved above the globe -->
            <div style="margin-bottom: 1rem;">
                <input
                    type="text"
                    id="location-search"
                    placeholder="Enter a location..."
                    style="width: 70%; padding: 0.6rem 1rem; border-radius: 8px; border: 1px solid #334155; background: #0f172a; color: #f1f5f9; font-size: 1rem;"
                />
                <button
                    id="search-btn"
                    style="padding: 0.6rem 1.2rem; border-radius: 8px; border: none; background: #60a5fa; color: #fff; font-size: 1rem; cursor: pointer;"
                >
                    Search
                </button>
            </div>
            <div id="globe-container"></div>
        </div>
    </div>

    <script>
        function updateMapWithLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    var lat = position.coords.latitude;
                    var lng = position.coords.longitude;
                    // If you want to zoom globe to user location, you can use map3D.flyCameraTo
                    if (window.map3D) {
                        window.map3D.flyCameraTo({
                            endCamera: {
                                center: { lat: lat, lng: lng, altitude: 50000 },
                                tilt: 0,
                                range: 50000,
                                heading: 0,
                            },
                            durationMillis: 2000,
                        });
                    }
                });
            }
        }
        window.onload = updateMapWithLocation;

        document.getElementById('search-btn').onclick = async function() {
            var location = document.getElementById('location-search').value.trim();
            if (location) {
                // Use Geocoding API to get lat/lng, then fly camera to that location
                const apiKey = "AIzaSyDK7BXtZz4ypjq0yr-7FrrAcl3oCoPpxK8";
                const url = `https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(location)}&key=${apiKey}`;
                const resp = await fetch(url);
                const data = await resp.json();
                if (data.status === "OK" && data.results.length > 0) {
                    const loc = data.results[0].geometry.location;
                    if (window.map3D) {
                        window.map3D.flyCameraTo({
                            endCamera: {
                                center: { lat: loc.lat, lng: loc.lng, altitude: 50000 },
                                tilt: 0,
                                range: 50000,
                                heading: 0,
                            },
                            durationMillis: 2000,
                        });
                    }
                } else {
                    alert("Location not found.");
                }
            }
        };

        document.getElementById('location-search').addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('search-btn').click();
            }
        });
    </script>
    <!-- Google Maps JS API Loader -->
    <script>
        (g => {
            var h, a, k, p = "The Google Maps JavaScript API", c = "google", l = "importLibrary", q = "__ib__", m = document, b = window;
            b = b[c] || (b[c] = {});
            var d = b.maps || (b.maps = {}), r = new Set, e = new URLSearchParams, u = () => h || (h = new Promise(async (f, n) => {
                await (a = m.createElement("script"));
                e.set("libraries", [...r] + "");
                for (k in g) e.set(k.replace(/[A-Z]/g, t => "_" + t[0].toLowerCase()), g[k]);
                e.set("callback", c + ".maps." + q);
                a.src = `https://maps.${c}apis.com/maps/api/js?` + e;
                d[q] = f;
                a.onerror = () => h = n(Error(p + " could not load."));
                a.nonce = m.querySelector("script[nonce]")?.nonce || "";
                m.head.append(a)
            }));
            d[l] ? console.warn(p + " only loads once. Ignoring:", g) : d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n))
        })({
            key: "AIzaSyDK7BXtZz4ypjq0yr-7FrrAcl3oCoPpxK8",
            v: "alpha"
        });
    </script>
    <script>
        window.map3D = null;

        async function init() {
            const { Map3DElement, MapMode, Marker3DInteractiveElement } = await google.maps.importLibrary("maps3d");
            const { PinElement } = await google.maps.importLibrary('marker');

            window.map3D = new Map3DElement({
                mode: MapMode.HYBRID,
            });

            map3D.addEventListener('gmp-click', (event) => {
                console.log("camera: { center: { lat: " + map3D.center.lat + ", lng : " + map3D.center.lng + ", altitude: " + map3D.center.altitude + " }, range: " + map3D.range + ", tilt: " + map3D.tilt + " ,heading: " + map3D.heading + " }");
                console.log("{ lat: " + event.position.lat + ", lng : " + event.position.lng + ", altitude: " + event.position.altitude + " }");
                map3D.stopCameraAnimation();
            });

            const marker = new Marker3DInteractiveElement({
                position: { lat: 51.5332, lng: -0.1260, altitude: 75 },
                label: 'Google UK',
                altitudeMode: 'ABSOLUTE',
                extruded: true,
            });

            marker.addEventListener('gmp-click', (event) => {
                map3D.flyCameraTo({
                    endCamera: {
                        center: marker.position,
                        tilt: 65,
                        range: 500,
                        heading: 0,
                    },
                    durationMillis: 12500,
                });

                map3D.addEventListener('gmp-animationend', () => {
                    map3D.flyCameraAround({
                        camera: {
                            center: marker.position,
                            tilt: 65,
                            range: 500,
                            heading: 0,
                        },
                        durationMillis: 5000,
                        rounds: 1
                    });
                }, { once: true });

                alert('You clicked on : ' + event.target.label);
                event.stopPropagation();
            });

            // Create a custom pin
            const base = document.location.href.substr(0, document.location.href.lastIndexOf("/"));
            const markerPin = new PinElement({
                "background": 'white',
                "glyph": new URL(base + '/images/gb.svg'),
                "scale": 1.0,
            });
            marker.append(markerPin);

            map3D.append(marker);

            // Add the globe to the container
            document.getElementById('globe-container').append(map3D);
        }

        window.addEventListener('DOMContentLoaded', init);
    </script>

    <!-- Alerts Popup Section -->
    <div class="alerts-section">
        <div class="alerts-popup">
            <h2 style="margin-top:0; margin-bottom:1rem;">Alerts & Notifications</h2>
            <ul class="alert-list">
                <li class="alert-item">
                    <div class="alert-content">
                        <span class="alert-icon">&#9888;</span>
                        <div>
                            <div class="alert-title">Low Battery</div>
                            <div class="alert-message">Robot Atlas battery below 20%.</div>
                            <div class="alert-timestamp">6/8/2024 11:30 AM</div>
                        </div>
                    </div>
                </li>
                <li class="alert-item">
                    <div class="alert-content">
                        <span class="alert-icon">&#9888;</span>
                        <div>
                            <div class="alert-title">Maintenance Required</div>
                            <div class="alert-message">Robot Spot scheduled for maintenance.</div>
                            <div class="alert-timestamp">6/8/2024 10:00 AM</div>
                        </div>
                    </div>
                </li>
                <li class="alert-item">
                    <div class="alert-content">
                        <span class="alert-icon">&#9888;</span>
                        <div>
                            <div class="alert-title">Sensor Malfunction</div>
                            <div class="alert-message">Robot Pepper sensor malfunction detected.</div>
                            <div class="alert-timestamp">6/8/2024 11:50 AM</div>
                        </div>
                    </div>
                </li>
            </ul>
            <!-- If no alerts, show this instead:
            <div class="no-alerts">
                No alerts or notifications at this time.
            </div>
            -->
        </div>
    </div>
</body>
</html>

